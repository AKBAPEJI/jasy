#!/usr/bin/env python

import sys, os

# Extend PYTHONPATH with 'lib'
sys.path.insert(0, os.path.normpath(os.path.join(os.path.dirname(os.path.abspath(sys.argv[0])), os.pardir, "lib")))

from js.Lexer import Lexer, ParseError
from js.Parser import parse


def jstree(source, filename=None):
    try:
        root = parse(Lexer(source, filename))
    except ParseError as error:
        print error
        return
        
    return root.toXml()

if __name__ == "__main__":
    print jstree(file(sys.argv[1]).read(), sys.argv[1])
