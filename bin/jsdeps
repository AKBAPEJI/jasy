#!/usr/bin/env python

import sys, os

# Extend PYTHONPATH with 'lib'
sys.path.insert(0, os.path.normpath(os.path.join(os.path.dirname(os.path.abspath(sys.argv[0])), os.pardir, "lib")))

from js.Parser import parse
from js.Dependencies import deps

def jsdeps(source, filename=None):
    root = parse(source, filename)
    (names, namespaced) = deps(root)
    
    print "Uses:"
    for name in names:
        print "  - %s" % name
    
    print "Classes:"
    for name in namespaced:
        print "  - %s" % name
    

if __name__ == "__main__":
    jsdeps(file(sys.argv[1]).read(), sys.argv[1])
